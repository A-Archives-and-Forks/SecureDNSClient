<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MsmhToolsWpfClass"
    xmlns:themes="clr-namespace:MsmhToolsWpfClass.Themes"
    xmlns:diag="clr-namespace:System.Diagnostics;assembly=WindowsBase">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/MsmhToolsWpfClass;component/AppThemeDark.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <BorderGapMaskConverter x:Key="BorderGapMaskConverter"/>

    <!-- WpfFlyoutGroupBox -->
    <Style TargetType="{x:Type local:WpfFlyoutGroupBox}">
        <Setter Property="Width" Value="Auto"/>
        <Setter Property="Height" Value="Auto"/>
        <Setter Property="Background" Value="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AppTheme.BorderBrush}}"/>
        <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AppTheme.BorderThickness}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AppTheme.ForegroundBrush}}"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Margin" Value="1"/>
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WpfFlyoutGroupBox}">
                    <Border x:Name="Border" Margin="0" SnapsToDevicePixels="True" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}">
                        <Grid x:Name="PART_MainGrid">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <StackPanel x:Name="PART_HeaderStackPanel" Grid.Row="0" Orientation="Horizontal"
                                        Background="{TemplateBinding HeaderBrush}">
                                <Path x:Name="PART_ArrowPath" Margin="10,4,5,4" Stretch="Uniform" UseLayoutRounding="True" Focusable="True"
                                      Data="M 5 1 L 5 9 L 7 7 L 7 8 L 4 12 L 1 8 L 1 7 L 3 9 L 3 1 L 5 1 Z"
                                      Width="{Binding ElementName=PART_Text, Path=ActualHeight, Converter={x:Static local:SubtractConverter.Instance}, ConverterParameter=2}"
                                      Height="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Width}"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Fill="{TemplateBinding Foreground}"/>
                                <TextBlock x:Name="PART_Text" Margin="5,4,10,4" HorizontalAlignment="Center" VerticalAlignment="Center"
                                           Foreground="{TemplateBinding Foreground}"
                                           Text="{TemplateBinding Header}"
                                           TextWrapping="NoWrap"
                                           ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                           ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                           FontWeight="{TemplateBinding FontWeight}"/>
                                <StackPanel.Style>
                                    <Style TargetType="{x:Type StackPanel}">
                                        <Setter Property="Cursor" Value="Hand"/>
                                    </Style>
                                </StackPanel.Style>
                            </StackPanel>
                            <Grid x:Name="PART_ContentGrid" Grid.Row="1" Margin="2">
                                <ContentPresenter Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Opacity" TargetName="Border" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- WpfFlyoutOverlay -->
    <Style TargetType="{x:Type local:WpfFlyoutOverlay}">
        <Style.Resources>
            <DataTemplate x:Key="Close">
                <Grid UseLayoutRounding="True">
                    <Path Data="M1,0 L6,5 L11,0 L12,1 L7,6 L12,11 L11,12 L6,7 L1,12 L0,11 L5,6 L0,1 z"
                          HorizontalAlignment="Center" VerticalAlignment="Center"
                          Fill="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}"/>
                </Grid>
            </DataTemplate>
        </Style.Resources>
        <Setter Property="Width" Value="Auto"/>
        <Setter Property="Height" Value="Auto"/>
        <Setter Property="Background" Value="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AppTheme.BorderBrush}}"/>
        <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AppTheme.BorderThickness}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AppTheme.ForegroundBrush}}"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WpfFlyoutOverlay}">
                    <Grid x:Name="PART_MainGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <StackPanel x:Name="PART_HeaderStackPanel" Grid.Row="0" Orientation="Horizontal" Background="{TemplateBinding Background}" Margin="{TemplateBinding Padding}">
                            <Grid Margin="0">
                                <Ellipse x:Name="PART_CircleEllipse" Stretch="Uniform" UseLayoutRounding="True" Focusable="False" StrokeThickness="2"
                                         Width="{Binding ElementName=PART_Text, Path=ActualHeight, Converter={x:Static local:SubtractConverter.Instance}, ConverterParameter=0}"
                                         Height="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Width}"
                                         HorizontalAlignment="Center" VerticalAlignment="Center"
                                         Fill="{TemplateBinding Foreground}"
                                         Stroke="{TemplateBinding BorderBrush}"/>
                                <Path x:Name="PART_ArrowPath" Stretch="Uniform" UseLayoutRounding="True" Focusable="True"
                                      Data="M 5 1 L 5 9 L 7 7 L 7 8 L 4 12 L 1 8 L 1 7 L 3 9 L 3 1 L 5 1 Z"
                                      Width="{Binding ElementName=PART_Text, Path=ActualHeight, Converter={x:Static local:SubtractConverter.Instance}, ConverterParameter=6}"
                                      Height="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Width}"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Fill="{TemplateBinding BorderBrush}"/>
                            </Grid>
                            <TextBlock x:Name="PART_Text" HorizontalAlignment="Center" VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       Text="{TemplateBinding Header}"
                                       TextWrapping="NoWrap"
                                       ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                       ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                       FontWeight="{TemplateBinding FontWeight}"/>
                            <StackPanel.Style>
                                <Style TargetType="{x:Type StackPanel}">
                                    <Setter Property="Cursor" Value="Hand"/>
                                </Style>
                            </StackPanel.Style>
                        </StackPanel>
                        <Popup x:Name="PART_Popup" Grid.Row="1" PlacementTarget="{Binding ElementName=PART_HeaderStackPanel}" Placement="Bottom" AllowsTransparency="True" PopupAnimation="Fade">
                            <Border x:Name="PART_PopupBorder" Margin="0" SnapsToDevicePixels="True" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}">
                                <StackPanel Orientation="Vertical">
                                    <Grid Background="{Binding HeaderBrush}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Margin="5,0,5,0" Text="{TemplateBinding Header}" HorizontalAlignment="Left"/>
                                        <local:WpfButton x:Name="PART_CloseButton"
                                                         Grid.Column="1"
                                                         VerticalAlignment="Stretch"
                                                         Background="Transparent"
                                                         MouseOverBrush="{DynamicResource {x:Static themes:AppTheme.IndianRedBrush}}"
                                                         RippleBrush="White"
                                                         BorderThickness="0"
                                                         WindowChrome.IsHitTestVisibleInChrome="True"
                                                         ContentTemplate="{StaticResource Close}"
                                                         Stretch="None"
                                                         RoundButton="True"
                                                         IsTabStop="False"/>
                                    </Grid>
                                    <ContentPresenter Margin="3" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </StackPanel>
                            </Border>
                        </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasHeader" Value="True">
                            <Setter TargetName="PART_Text" Property="Margin" Value="5,0,0,0"/>
                        </Trigger>
                        <Trigger Property="HasHeader" Value="False">
                            <Setter TargetName="PART_Text" Property="Margin" Value="0"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Opacity" TargetName="PART_MainGrid" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- WpfHelpFly -->
    <Style TargetType="{x:Type local:WpfHelpFly}">
        <Style.Resources>
            <DataTemplate x:Key="Close">
                <Grid UseLayoutRounding="True">
                    <Path Data="M1,0 L6,5 L11,0 L12,1 L7,6 L12,11 L11,12 L6,7 L1,12 L0,11 L5,6 L0,1 z"
                      HorizontalAlignment="Center" VerticalAlignment="Center"
                      Fill="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}"/>
                </Grid>
            </DataTemplate>
        </Style.Resources>
        <Setter Property="Width" Value="Auto"/>
        <Setter Property="Height" Value="Auto"/>
        <Setter Property="Background" Value="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"/>
        <Setter Property="BorderBrush" Value="Black"/>
        <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AppTheme.BorderThickness}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AppTheme.ForegroundBrush}}"/>
        <Setter Property="HorizontalAlignment" Value="Right"/>
        <Setter Property="VerticalAlignment" Value="Top"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Padding" Value="2"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WpfHelpFly}">
                    <Grid x:Name="PART_MainGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid x:Name="PART_HeaderGrid" Grid.Row="0" Background="Transparent" Margin="{TemplateBinding Padding}">
                            <TextBlock x:Name="PART_HiddenText" HorizontalAlignment="Center" VerticalAlignment="Center"
                                       Foreground="{TemplateBinding Foreground}"
                                       Text="i" TextWrapping="NoWrap"
                                       ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                       ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                       FontSize="{TemplateBinding FontSize, Converter={x:Static local:SubtractConverter.Instance}, ConverterParameter=2}"
                                       FontWeight="{TemplateBinding FontWeight}"
                                       Visibility="Visible" Opacity="0"/>
                            <Ellipse x:Name="PART_CircleEllipse" Stretch="Uniform" UseLayoutRounding="True" Focusable="False" StrokeThickness="1"
                                     Width="{Binding ElementName=PART_HiddenText, Path=ActualHeight, Converter={x:Static local:SubtractConverter.Instance}, ConverterParameter=0}"
                                     Height="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Width}"
                                     HorizontalAlignment="Center" VerticalAlignment="Center"
                                     Fill="{TemplateBinding Foreground}"
                                     Stroke="{TemplateBinding BorderBrush}"/>
                            <Path x:Name="PART_HelpPath" Stretch="Uniform" UseLayoutRounding="True" Focusable="False"
                                  Data="M 0 3 L 3 3 L 3 0 L 0 0 Z M 0 4 L 3 4 L 3 13 L 0 13 L 0 4 Z"
                                  Width="{Binding ElementName=PART_HiddenText, Path=ActualHeight, Converter={x:Static local:SubtractConverter.Instance}, ConverterParameter=6}"
                                  Height="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Width}"
                                  HorizontalAlignment="Center" VerticalAlignment="Center"
                                  Fill="{TemplateBinding BorderBrush}"/>
                            <Grid.Style>
                                <Style TargetType="{x:Type Grid}">
                                    <Setter Property="Cursor" Value="Hand"/>
                                </Style>
                            </Grid.Style>
                        </Grid>
                        <Popup x:Name="PART_Popup" Grid.Row="1" PlacementTarget="{Binding ElementName=PART_HeaderStackPanel}" Placement="Bottom" AllowsTransparency="True" PopupAnimation="Fade">
                            <Border x:Name="PART_PopupBorder" Margin="0" SnapsToDevicePixels="True" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}">
                                <StackPanel Orientation="Vertical">
                                    <Grid Background="{Binding HeaderBrush}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Margin="5,0,5,0" Text="{TemplateBinding Header}" HorizontalAlignment="Left"/>
                                        <local:WpfButton x:Name="PART_CloseButton"
                                                     Grid.Column="1"
                                                     VerticalAlignment="Stretch"
                                                     Background="Transparent"
                                                     MouseOverBrush="{DynamicResource {x:Static themes:AppTheme.IndianRedBrush}}"
                                                     RippleBrush="White"
                                                     BorderThickness="0"
                                                     WindowChrome.IsHitTestVisibleInChrome="True"
                                                     ContentTemplate="{StaticResource Close}"
                                                     Stretch="None"
                                                     RoundButton="True"
                                                     IsTabStop="False"/>
                                    </Grid>
                                    <ContentPresenter Margin="8" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </StackPanel>
                            </Border>
                        </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Fill" TargetName="PART_CircleEllipse" Value="{Binding BorderBrush}"/>
                            <Setter Property="Stroke" TargetName="PART_CircleEllipse" Value="{Binding Foreground}"/>
                            <Setter Property="Fill" TargetName="PART_HelpPath" Value="{Binding Foreground}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Opacity" TargetName="PART_MainGrid" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- WpfSplitPanelH -->
    <Style TargetType="{x:Type local:WpfSplitPanelH}">
        <Setter Property="Width" Value="Auto"/>
        <Setter Property="Height" Value="Auto"/>
        <Setter Property="Background" Value="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AppTheme.BorderBrush}}"/>
        <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AppTheme.BorderThickness}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AppTheme.ForegroundBrush}}"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Margin" Value="1"/>
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WpfSplitPanelH}">
                    <Border x:Name="Border" Margin="0" SnapsToDevicePixels="True" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}">
                        <Grid x:Name="PART_MainGrid">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="{Binding Panel1GridLength}"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="{Binding Panel2GridLength}"/>
                            </Grid.RowDefinitions>
                            <Grid x:Name="PART_Content1Grid" Grid.Row="0" Margin="2">
                                <ContentPresenter Content="{TemplateBinding Panel1}" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                            <GridSplitter x:Name="PART_GridSplitter" Grid.Row="1" Margin="0,0,0,0" MinHeight="4" MaxHeight="4"
                                          ResizeDirection="Rows" ResizeBehavior="PreviousAndNext"
                                          HorizontalAlignment="Stretch" VerticalAlignment="Top"
                                          Background="{TemplateBinding SplitterBrush}"/>
                            <Border x:Name="PART_SplitterBorder" Grid.Row="1" Margin="0,4,0,0" MinHeight="4" MaxHeight="4" BorderThickness="0"
                                    HorizontalAlignment="Stretch" VerticalAlignment="Top"
                                    Background="{TemplateBinding SplitterBrush}">
                                <Border.Style>
                                    <Style TargetType="{x:Type Border}">
                                        <Setter Property="Cursor" Value="Hand"/>
                                    </Style>
                                </Border.Style>
                            </Border>
                            <Grid x:Name="PART_Content2Grid" Grid.Row="2" Margin="2">
                                <ContentPresenter Content="{TemplateBinding Panel2}" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Opacity" TargetName="Border" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- WpfSplitPanelV -->
    <Style TargetType="{x:Type local:WpfSplitPanelV}">
        <Setter Property="Width" Value="Auto"/>
        <Setter Property="Height" Value="Auto"/>
        <Setter Property="Background" Value="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AppTheme.BorderBrush}}"/>
        <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AppTheme.BorderThickness}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AppTheme.ForegroundBrush}}"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Margin" Value="1"/>
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WpfSplitPanelV}">
                    <Border x:Name="Border" Margin="0" SnapsToDevicePixels="True" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}">
                        <Grid x:Name="PART_MainGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="{Binding Panel1GridLength}"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="{Binding Panel2GridLength}"/>
                            </Grid.ColumnDefinitions>
                            <Grid x:Name="PART_Content1Grid" Grid.Column="0" Margin="2">
                                <ContentPresenter Content="{TemplateBinding Panel1}" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                            <GridSplitter x:Name="PART_GridSplitter" Grid.Column="1" Margin="0,0,0,0" MinWidth="4" MaxWidth="4"
                                          ResizeDirection="Columns" ResizeBehavior="PreviousAndNext"
                                          HorizontalAlignment="Left" VerticalAlignment="Stretch"
                                          Background="{TemplateBinding SplitterBrush}"/>
                            <Border x:Name="PART_SplitterBorder" Grid.Column="1" Margin="4,0,0,0" MinWidth="4" MaxWidth="4" BorderThickness="0"
                                    HorizontalAlignment="Left" VerticalAlignment="Stretch"
                                    Background="{TemplateBinding SplitterBrush}">
                                <Border.Style>
                                    <Style TargetType="{x:Type Border}">
                                        <Setter Property="Cursor" Value="Hand"/>
                                    </Style>
                                </Border.Style>
                            </Border>
                            <Grid x:Name="PART_Content2Grid" Grid.Column="2" Margin="2">
                                <ContentPresenter Content="{TemplateBinding Panel2}" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Opacity" TargetName="Border" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- WpfWindow -->
    <Style TargetType="{x:Type local:WpfWindow}">
        <Style.Resources>

            <DrawingImage x:Key="MinimizeImage">
                <DrawingImage.Drawing>
                    <DrawingGroup>
                        <GeometryDrawing Brush="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}">
                            <GeometryDrawing.Pen>
                                <Pen Brush="Transparent" Thickness="0"/>
                            </GeometryDrawing.Pen>
                            <GeometryDrawing.Geometry>
                                <GeometryGroup>
                                    <PathGeometry Figures="M 0 0 L 12 0 L 12 1 L 0 1 L 0 0 Z"/>
                                </GeometryGroup>
                            </GeometryDrawing.Geometry>
                        </GeometryDrawing>
                    </DrawingGroup>
                </DrawingImage.Drawing>
            </DrawingImage>

            <DataTemplate x:Key="Minimize">
                <Grid>
                    <Path Data="M0,5 L12,5 L12,6 L0,6 z"
                          HorizontalAlignment="Center" VerticalAlignment="Center"
                          Fill="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}"/>
                </Grid>
            </DataTemplate>

            <DrawingImage x:Key="MaximizeImage">
                <DrawingImage.Drawing>
                    <DrawingGroup>
                        <GeometryDrawing Brush="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}">
                            <GeometryDrawing.Pen>
                                <Pen Brush="Transparent" Thickness="0"/>
                            </GeometryDrawing.Pen>
                            <GeometryDrawing.Geometry>
                                <GeometryGroup>
                                    <PathGeometry Figures="M1,1  L1 ,11 L11,11 L11,1 z M0,0 L12,0 L12,12 L0,12 z"/>
                                </GeometryGroup>
                            </GeometryDrawing.Geometry>
                        </GeometryDrawing>
                    </DrawingGroup>
                </DrawingImage.Drawing>
            </DrawingImage>

            <DataTemplate x:Key="Maximize">
                <Grid>
                    <Path Data="M1,1  L1 ,11 L11,11 L11,1 z M0,0 L12,0 L12,12 L0,12 z"
                          HorizontalAlignment="Center" VerticalAlignment="Center"
                          Fill="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}"/>
                </Grid>
            </DataTemplate>

            <DrawingImage x:Key="RestoreImage">
                <DrawingImage.Drawing>
                    <DrawingGroup>
                        <GeometryDrawing Brush="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}">
                            <GeometryDrawing.Pen>
                                <Pen Brush="Transparent" Thickness="0"/>
                            </GeometryDrawing.Pen>
                            <GeometryDrawing.Geometry>
                                <GeometryGroup>
                                    <PathGeometry Figures="M1,3 L1,11 L9,11 L9,3 z M3,1 L3,2 L10,2 L10,9 L11,9 L11,1 z M2 ,0 L12,0 L12,10 L10,10 L10,12 L0,12 L0,2 L2 ,2 z"/>
                                </GeometryGroup>
                            </GeometryDrawing.Geometry>
                        </GeometryDrawing>
                    </DrawingGroup>
                </DrawingImage.Drawing>
            </DrawingImage>

            <DataTemplate x:Key="Restore">
                <Grid UseLayoutRounding="True">
                    <Path Data="M1,3 L1,11 L9,11 L9,3 z M3,1 L3,2 L10,2 L10,9 L11,9 L11,1 z M2 ,0 L12,0 L12,10 L10,10 L10,12 L0,12 L0,2 L2 ,2 z"
                          HorizontalAlignment="Center" VerticalAlignment="Center"
                          Fill="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}"/>
                </Grid>
            </DataTemplate>

            <DrawingImage x:Key="CloseImage">
                <DrawingImage.Drawing>
                    <DrawingGroup>
                        <GeometryDrawing Brush="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}">
                            <GeometryDrawing.Pen>
                                <Pen Brush="Transparent" Thickness="0"/>
                            </GeometryDrawing.Pen>
                            <GeometryDrawing.Geometry>
                                <GeometryGroup>
                                    <PathGeometry Figures="M1,0 L6,5 L11,0 L12,1 L7,6 L12,11 L11,12 L6,7 L1,12 L0,11 L5,6 L0,1 z"/>
                                </GeometryGroup>
                            </GeometryDrawing.Geometry>
                        </GeometryDrawing>
                    </DrawingGroup>
                </DrawingImage.Drawing>
            </DrawingImage>

            <DataTemplate x:Key="Close">
                <Grid UseLayoutRounding="True">
                    <Path Data="M1,0 L6,5 L11,0 L12,1 L7,6 L12,11 L11,12 L6,7 L1,12 L0,11 L5,6 L0,1 z"
                          HorizontalAlignment="Center" VerticalAlignment="Center"
                          Fill="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrush}}"/>
                </Grid>
            </DataTemplate>

            <Style x:Key="TitleBarButtonStyle" TargetType="{x:Type local:WpfButton}">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="RippleBrush" Value="White"/>
                <Setter Property="CornerRadius" Value="0"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="MinWidth" Value="36"/>
                <Setter Property="Width" Value="36"/>
                <Setter Property="Focusable" Value="False"/>
                <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
                <Setter Property="IsTabStop" Value="False"/>
            </Style>

        </Style.Resources>
        
        <Setter Property="Background" Value="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:AppTheme.BorderBrush}}"/>
        <Setter Property="BorderThickness" Value="{DynamicResource {x:Static themes:AppTheme.BorderThickness}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static themes:AppTheme.ForegroundBrush}}"/>
        <Setter Property="WindowStyle" Value="None"/>
        <!--<Setter Property="OverridesDefaultStyle" Value="true"/>-->
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="WindowChrome.WindowChrome">
            <Setter.Value>
                <WindowChrome CaptionHeight="0" CornerRadius="0" GlassFrameThickness="1" NonClientFrameEdges="None" ResizeBorderThickness="4" UseAeroCaptionButtons="False"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WpfWindow}">
                    <Border x:Name="PART_RootBorder"
                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            TextBlock.Foreground="{TemplateBinding Foreground}"
                            Padding="0">
                        <Grid x:Name="PART_RootGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30" MinHeight="30"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid x:Name="PART_TitleGrid" Grid.Row="0"
                                  Background="{DynamicResource {x:Static themes:AppTheme.BackgroundDarkerBrush}}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid x:Name="PART_TitleGrid_Left" Grid.Column="0">
                                        <StackPanel Orientation="Horizontal">
                                            <Image x:Name="PART_TitleImage" Margin="10,6,2.5,6" HorizontalAlignment="Left" VerticalAlignment="Center"
                                                   Stretch="Uniform" SnapsToDevicePixels="True"
                                                   RenderOptions.BitmapScalingMode="HighQuality"
                                                   RenderOptions.EdgeMode="Aliased"
                                                   Source="{TemplateBinding Icon}"/>
                                            <TextBlock x:Name="PART_TitleText" Margin="2.5,0,5,0" HorizontalAlignment="Left" VerticalAlignment="Center"
                                                       Foreground="{TemplateBinding Foreground}"
                                                       FontSize="{DynamicResource {x:Static SystemFonts.CaptionFontSize}}"
                                                       Text="{TemplateBinding Title}"
                                                       TextWrapping="NoWrap"
                                                       ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                                       ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                                       FontWeight="Medium"/>
                                        </StackPanel>
                                    </Grid>
                                    <Grid x:Name="PART_TitleGrid_Right" Grid.Column="1">
                                        <StackPanel Orientation="Horizontal">
                                            <local:WpfButton x:Name="PART_Button1" Margin="0,0,2,0" VerticalAlignment="Stretch"/>
                                            <local:WpfButton x:Name="PART_Button2" Margin="0,0,2,0" VerticalAlignment="Stretch"/>
                                            <local:WpfButton x:Name="PART_Button3" Margin="0,0,2,0" VerticalAlignment="Stretch"/>
                                            <Separator x:Name="PART_Separator" Margin="3,0,5,0"
                                                       Background="{DynamicResource {x:Static themes:AppTheme.DodgerBlueBrushTransparent}}"
                                                       Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>
                                            <local:WpfButton x:Name="PART_MinimizeButton"
                                                             VerticalAlignment="Stretch"
                                                             MinWidth="36"
                                                             Width="36"
                                                             Background="Transparent"
                                                             MouseOverBrush="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"
                                                             RippleBrush="{DynamicResource {x:Static themes:AppTheme.MediumSeaGreenBrush}}"
                                                             CornerRadius="0"
                                                             BorderThickness="0"
                                                             WindowChrome.IsHitTestVisibleInChrome="True"
                                                             ContentTemplate="{StaticResource Minimize}"
                                                             Stretch="None"
                                                             IsTabStop="False"/>
                                            <local:WpfButton x:Name="PART_MaximizeRestoreButton"
                                                             VerticalAlignment="Stretch"
                                                             MinWidth="36"
                                                             Width="36"
                                                             Background="Transparent"
                                                             MouseOverBrush="{DynamicResource {x:Static themes:AppTheme.BackgroundBrush}}"
                                                             RippleBrush="{DynamicResource {x:Static themes:AppTheme.MediumSeaGreenBrush}}"
                                                             CornerRadius="0"
                                                             BorderThickness="0"
                                                             WindowChrome.IsHitTestVisibleInChrome="True"
                                                             ContentTemplate="{StaticResource Maximize}"
                                                             Stretch="None"
                                                             IsTabStop="False"/>
                                            <local:WpfButton x:Name="PART_CloseButton"
                                                             VerticalAlignment="Stretch"
                                                             MinWidth="36"
                                                             Width="36"
                                                             Background="Transparent"
                                                             MouseOverBrush="{DynamicResource {x:Static themes:AppTheme.IndianRedBrush}}"
                                                             RippleBrush="White"
                                                             CornerRadius="0"
                                                             BorderThickness="0"
                                                             WindowChrome.IsHitTestVisibleInChrome="True"
                                                             ContentTemplate="{StaticResource Close}"
                                                             Stretch="None"
                                                             IsTabStop="False"/>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                            </Grid>
                            <Grid x:Name="PART_ContentPresenterGrid" Grid.Row="1"
                                  Background="{TemplateBinding Background}">
                                <ContentPresenter Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Focusable="False" RecognizesAccessKey="True"/>
                            </Grid>
                            <ResizeGrip x:Name="ResizeGrip"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Grid.Row="1"
                                        IsTabStop="False"
                                        Visibility="Hidden"
                                        WindowChrome.ResizeGripDirection="BottomRight"/>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsActive" Value="False">
                            <Setter Property="BorderBrush" Value="#FF6F7785"/>
                        </Trigger>
                        <Trigger Property="WindowState" Value="Maximized">
                            <Setter TargetName="PART_MaximizeRestoreButton" Property="ContentTemplate" Value="{StaticResource Restore}"/>
                            <Setter TargetName="PART_RootGrid" Property="Margin" Value="7"/>
                        </Trigger>
                        <Trigger Property="WindowState" Value="Normal">
                            <Setter TargetName="PART_MaximizeRestoreButton" Property="ContentTemplate" Value="{StaticResource Maximize}"/>
                        </Trigger>
                        <Trigger Property="ResizeMode" Value="NoResize">
                            <Setter TargetName="PART_MinimizeButton" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="PART_MaximizeRestoreButton" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="ResizeMode" Value="CanMinimize">
                            <Setter TargetName="PART_MaximizeRestoreButton" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="ResizeMode" Value="CanResizeWithGrip" />
                                <Condition Property="WindowState" Value="Normal"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="ResizeGrip" Property="Visibility" Value="Visible"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    
</ResourceDictionary>
